<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="SPL File HDFSFileSinkSampleLineFormat.spl"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_compilationunit"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>SPL File HDFSFileSinkSampleLineFormat.spl</title>
</head>
<body id="spldoc_compilationunit">


<h1 class="title topictitle1">SPL File <tt class="ph tt">HDFSFileSinkSampleLineFormat.spl</tt></h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">Toolkits</a> &gt; <a class="xref" href="tk$HDFSFileSinkSamples.html">HDFSFileSinkSamples 1.0.0</a> &gt; <a class="xref" href="ns$hdfsexample.html">hdfsexample</a> &gt; HDFSFileSinkSampleLineFormat.spl</p>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Content</h2>
  
    <dl class="dl">
    <dt class="dt dlterm"/>
<dd class="dd"/>

    
      <dt class="dt dlterm splhead-2">Composite Operators</dt>

      <dd class="dd"><ul class="sl simple">
<li class="sli"><strong class="ph b"><a class="xref" href="#spldoc_compilationunit__composite_operator__HDFS2FileSinkSampleLineFormat">composite HDFS2FileSinkSampleLineFormat</a></strong>: The <a class="xref" href="spl$hdfsexample$HDFSFileSinkSampleLineFormat.html#spldoc_compilationunit__composite_operator__HDFS2FileSinkSampleLineFormat">HDFS2FileSinkSampleLineFormat</a> composite demonstrates how you can use the HDFS2FileSink operator to write data to a file on the Hadoop File System.
</li>

     </ul>
</dd>

    
     </dl>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Composite Operators</h2>
  
</div>

<div class="section" id="spldoc_compilationunit__composite_operator__HDFS2FileSinkSampleLineFormat"><h2 class="title sectiontitle splpart">composite HDFS2FileSinkSampleLineFormat</h2>
  
</div>

<div class="section">

<p class="p">The <a class="xref" href="spl$hdfsexample$HDFSFileSinkSampleLineFormat.html#spldoc_compilationunit__composite_operator__HDFS2FileSinkSampleLineFormat">HDFS2FileSinkSampleLineFormat</a> composite demonstrates how you can use the HDFS2FileSink operator to write data to a file on the Hadoop File System.
</p>

<p class="p">This sample reads the "LineInput.txt" file from data directory.  The content of the file is read in one line at a time and sent to a HDFS2FileSink operator to write the data to the Hadoop File System.  We make use of the "bytesPerFile" optional parameter to break up the output file.  A new file is created when the output file size is approximately 100 bytes.
</p>

<div class="p">To build this application, you need to set up the HADOOP_HOME environment variable as follows:
<ul class="ul">
<li class="li"> export HADOOP_HOME=&lt;Hadoop installation&gt;</li>

</ul>

</div>

<div class="p">To compile and run this sample in Streams Studio:
<ol class="ol">
<li class="li"> Start Streams Studio</li>

<li class="li"> In Streams Explorer view, add the "com.ibm.streams.bigdata" toolkit as one of the toolkit locations</li>

<li class="li"> From the main menu, select File -&gt; Import.</li>

<li class="li"> Expand InfoSphere Streams Studio</li>

<li class="li"> Select Sample SPL Application</li>

<li class="li"> Select this sample from the Import SPL Sample Application dialog</li>

<li class="li"> Once the sample is imported, wait for the build to finish.  If autobuild is turned off, select resulting project, right click -&gt; Build Project</li>

<li class="li"> Once the project is built, select the main composite of the sample, right click -&gt; Launch Active Build Config
<div class="p"> To compile and run this sample at the command line:
<ol class="ol" type="a">
<li class="li"> Create a directory. For example, you can create a directory in your home directory.
<ul class="ul">
<li class="li"> mkdir $HOME/hdfssamples</li>

</ul>
</li>

<li class="li"> Copy the samples to this directory.
<ul class="ul">
<li class="li"> cp -R $STREAMS_INSTALL/toolkits/com.ibm.streams.bigdata/samples/* $HOME/hdfssamples/</li>

</ul>
</li>

<li class="li"> Build one of the sample applications. Go to the appropriate subdirectory and run the make. By default, the sample is compiled as a distributed application. If you want to compile the application as a standalone application, run make standalone instead. Run make clean to return the samples back to their original state.</li>

<li class="li"> Run the sample application.  
<ul class="ul">
<li class="li"> To run the HDFS2FileSinkSampleLineFormat sample application in distributed mode, start your IBM InfoSphere Streams instance, then use the streamtool command to submit the .adl files that were generated during the application build.
<ul class="ul">
<li class="li"> streamtool submitjob -i &lt;instance_name&gt; output/Distributed/hdfsexample::HDFS2FileSinkSampleLineFormat/hdfsexample.HDFS2FileSinkSampleLineFormat.adl -P hdfsUri="hdfs://&lt;machine_name&gt;:&lt;port&gt;" -P hdfsUser="&lt;user_name&gt;"</li>

</ul>
</li>

<li class="li"> To run the HDFS2FileSinkSampleLineFormat sample application in standalone mode, issue the command:
<ul class="ul">
<li class="li"> ./output/Standalone/hdfsexample::HDFS2FileSinkSampleLineFormat/bin/standalone hdfsUri="hdfs://&lt;machine_name&gt;:&lt;port&gt;" hdfsUser="&lt;user_name&gt;"</li>

</ul>
</li>

</ul>
</li>

</ol>

</div>
</li>

</ol>

</div>

</div>

<div class="section">
</div>

<div class="section">
</div>

<div class="section">
</div>

<div class="section"><h2 class="title sectiontitle splhead-2">Composite Operator Graph</h2>
  
</div>

<div class="section splgraph">
<object type="image/svg+xml" data="../../image/tk$HDFSFileSinkSamples/op$hdfsexample$HDFS2FileSinkSampleLineFormat.svg" width="232" height="109">
<span>SPL composite operator image not displayed. Problem loading file: ../../image/tk$HDFSFileSinkSamples/op$hdfsexample$HDFS2FileSinkSampleLineFormat.svg
</span>
</object>
</div>

</div>


</body>
</html>