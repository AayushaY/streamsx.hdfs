<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="SPL File Main.spl"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_compilationunit"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>SPL File Main.spl</title>
</head>
<body id="spldoc_compilationunit">


<h1 class="title topictitle1">SPL File <tt class="ph tt">Main.spl</tt></h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">Toolkits</a> &gt; <a class="xref" href="tk$HDFSParallelSink.html">HDFSParallelSink 1.0.0</a> &gt; <a class="xref" href="ns$parallelwrite.html">parallelwrite</a> &gt; Main.spl</p>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Content</h2>
  
    <dl class="dl">
    <dt class="dt dlterm"/>
<dd class="dd"/>

    
      <dt class="dt dlterm splhead-2">Composite Operators</dt>

      <dd class="dd"><ul class="sl simple">
<li class="sli"><strong class="ph b"><a class="xref" href="#spldoc_compilationunit__composite_operator__Main">composite Main</a></strong>: Shows how speed up file writing using multiple HDFSFileSinks.
</li>

     </ul>
</dd>

    
     </dl>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Composite Operators</h2>
  
</div>

<div class="section" id="spldoc_compilationunit__composite_operator__Main"><h2 class="title sectiontitle splpart">composite Main</h2>
  
</div>

<div class="section">

<p class="p">Shows how speed up file writing using multiple HDFSFileSinks.
</p>

<p class="p">With the older HDFS toolkit, parallelizing writing to HDFS was complicated, involving splmm and a specialized operator.  
</p>

<p class="p">With Streams 3.2 and beyond, the @parallel annotation allows for easy parallelization, and the 3.2 java-based HDFS operator means that the specialized splitter is no  longer required for good performance. 
</p>

<p class="p">The combination of these two operators means it is very easy to parallelization is  quite simple.  In this example, by default, we use a width of three.  To change  the width, you can set the submission time parameter named width.  For example, to set the width to 5 in distributed mode, add &lt;code&gt;-P width=5&lt;/code&gt; to the  submitjob command.  To set the width to 5 in standalone mode, and &lt;code&gt;width=5&lt;/code&gt; when you run the standalone application.  
</p>

<div class="p">The code below makes use of getChannel() to ensure the that file name written by each of  the sinks will be different.  In this case, with the default width of three, the three files are:
<ul class="ul">
<li class="li"> file0of3.txt</li>

<li class="li"> file1of3.txt</li>

<li class="li"> file2of3.txt</li>

</ul>

</div>

</div>

<div class="section"><h2 class="title sectiontitle">Parameters</h2>

<ul class="sl simple">
<li class="sli"><strong class="ph b">baseDir</strong>: 
</li>

<li class="sli"><strong class="ph b">numTuples</strong>: 
</li>

<li class="sli"><strong class="ph b">numParallelCopies</strong>: 
</li>

</ul>

</div>

<div class="section">
</div>

<div class="section">
</div>

<div class="section"><h2 class="title sectiontitle splhead-2">Composite Operator Graph</h2>
  
</div>

<div class="section splgraph">
<object type="image/svg+xml" data="../../image/tk$HDFSParallelSink/op$parallelwrite$Main.svg" width="232" height="109">
<span>SPL composite operator image not displayed. Problem loading file: ../../image/tk$HDFSParallelSink/op$parallelwrite$Main.svg
</span>
</object>
</div>

</div>


</body>
</html>